2025-02-05 16:22:51.208 | INFO     | __main__:<module>:49 - Starting video processing test
2025-02-05 16:22:51.209 | INFO     | generator.subtitle:__init__:20 - Initializing SubtitleGenerator with base model on cpu
2025-02-05 16:22:51.953 | INFO     | generator.video_processor:__init__:34 - Initialized VideoProcessor with session 67a382
2025-02-05 16:22:51.953 | INFO     | generator.video_processor:extract_audio:39 - Extracting audio to C:\Users\skibi\AppData\Local\Temp\temp_audio.wav
2025-02-05 16:23:58.595 | INFO     | __main__:<module>:49 - Starting video processing test
2025-02-05 16:23:58.596 | INFO     | generator.subtitle:__init__:20 - Initializing SubtitleGenerator with base model on cpu
2025-02-05 16:23:59.239 | INFO     | generator.video_processor:__init__:34 - Initialized VideoProcessor with session 67a382
2025-02-05 16:23:59.239 | INFO     | generator.video_processor:extract_audio:39 - Extracting audio to C:\Users\skibi\AppData\Local\Temp\temp_audio.wav
2025-02-05 16:24:35.084 | INFO     | generator.video_processor:__init__:34 - Initialized VideoProcessor with session 67a382
2025-02-05 16:24:35.085 | INFO     | __main__:process_video:17 - Processing video: e:\ai-generator-2\inputs\video.mkv
2025-02-05 16:24:35.085 | INFO     | generator.video_processor:extract_audio:39 - Extracting audio to C:\Users\skibi\AppData\Local\Temp\temp_audio.wav
2025-02-05 16:24:35.246 | INFO     | generator.subtitle:__init__:20 - Initializing SubtitleGenerator with base model on cpu
2025-02-05 16:24:40.647 | DEBUG    | generator.subtitle:process:33 - Transcribed 3 segments
2025-02-05 16:24:52.881 | DEBUG    | generator.subtitle:process:41 - Alignment completed
2025-02-05 16:24:52.905 | INFO     | generator.llm_processor:__init__:50 - Initialized LLM processor with gemma2
2025-02-05 16:24:52.906 | DEBUG    | generator.llm_processor:process:64 - Sending prompt to Ollama:
Analyze this political speech and select up to 3 most interesting fragments (total max 30.0s).
Each fragment can be a single sentence or multiple consecutive sentences.

Speech segments:
[0] [2.41-6.19] Szanowni państwo, znajdujemy się przed Instytutem Pamięci Narodowej.
[1] [6.25-11.81] Przed chwilą wraz z posłym Patrykiem Jaskurskim złożyliśmy dwa pisma.
[2] [11.85-20.02] Jedna pisma to jest interwencja poselska, a drugie to jest zawiodomienie o konieczności w szczęcia postępowania.
[3] [20.06-23.52] Wszystko to na kanwie tego, o czym wczoraj mówiliśmy, 13 grudnia,
[4] [24.84-41.82] Po słowie Prawa i Sprawiedliwości porównali pana Marcina Romanovskiego, poszukiwanego listem gączym przez prokuraturę, prokuratury, która postawiła mu 11 zarzutów do ofiar stanu wojennego, do bohaterów, tym księdza Jerzego Popiłuszki.
[5] [42.40-47.62] Dzisiaj kiedy rozmawialiśmy z bohaterką tamtych czasów Henryką Krzywonus.
[6] [48.14-50.05] Ona nie kryje oburzenia tymi słowami.
[7] [50.09-59.97] Stąd konieczne jest, aby Instytut Pamięci Narodowej jako państwowy organ odpowiedzialny zadbanie o polską historię, o dobre imię

Return JSON in this exact format:
{
    "selections": [
        {
            "start_time": float,
            "end_time": float,
            "reason": "why this part is interesting"
        }
        // up to 3 selections allowed
    ]
}

Rules:
1. Pick up to 3 most interesting parts
2. Each part must be continuous (no gaps within a selection)
3. Total duration of all selections must not exceed 30.0 seconds
4. Fragments don't need to be consecutive (can be from different parts of speech)

Consider: announcements, emotional statements, key messages, controversies.
2025-02-05 16:25:38.791 | INFO     | generator.llm_processor:process:83 - Selected 3 segments, total duration: 28.77s
2025-02-05 16:25:38.791 | INFO     | generator.video_processor:create_highlights:57 - Creating highlights from 3 segments, total duration: 28.77s
2025-02-05 16:25:38.791 | DEBUG    | generator.video_processor:create_highlights:64 - Processing segment 1/3: 24.84-41.82
2025-02-05 16:25:38.791 | DEBUG    | generator.video_processor:create_highlights:76 - Extracting raw segment to C:\Users\skibi\AppData\Local\Temp\raw_67a382_00.mp4
2025-02-05 16:25:38.849 | DEBUG    | generator.video_processor:create_highlights:96 - Adding subtitles to segment 1
2025-02-05 16:25:38.850 | DEBUG    | generator.video_processor:_add_subtitles_to_segment:157 - Adding subtitles for time range 24.84-41.82
2025-02-05 16:26:24.805 | INFO     | generator.video_processor:__init__:34 - Initialized VideoProcessor with session 67a383
2025-02-05 16:26:24.805 | INFO     | __main__:process_video:17 - Processing video: e:\ai-generator-2\inputs\video.mkv
2025-02-05 16:26:24.805 | INFO     | generator.video_processor:extract_audio:39 - Extracting audio to C:\Users\skibi\AppData\Local\Temp\temp_audio.wav
2025-02-05 16:26:24.960 | INFO     | generator.subtitle:__init__:20 - Initializing SubtitleGenerator with base model on cpu
2025-02-05 16:26:30.177 | DEBUG    | generator.subtitle:process:33 - Transcribed 3 segments
2025-02-05 16:26:42.083 | DEBUG    | generator.subtitle:process:41 - Alignment completed
2025-02-05 16:26:42.111 | INFO     | generator.llm_processor:__init__:50 - Initialized LLM processor with gemma2
2025-02-05 16:26:42.111 | DEBUG    | generator.llm_processor:process:64 - Sending prompt to Ollama:
Analyze this political speech and select up to 3 most interesting fragments (total max 30.0s).
Each fragment can be a single sentence or multiple consecutive sentences.

Speech segments:
[0] [2.41-6.19] Szanowni państwo, znajdujemy się przed Instytutem Pamięci Narodowej.
[1] [6.25-11.81] Przed chwilą wraz z posłym Patrykiem Jaskurskim złożyliśmy dwa pisma.
[2] [11.85-20.02] Jedna pisma to jest interwencja poselska, a drugie to jest zawiodomienie o konieczności w szczęcia postępowania.
[3] [20.06-23.52] Wszystko to na kanwie tego, o czym wczoraj mówiliśmy, 13 grudnia,
[4] [24.84-41.82] Po słowie Prawa i Sprawiedliwości porównali pana Marcina Romanovskiego, poszukiwanego listem gączym przez prokuraturę, prokuratury, która postawiła mu 11 zarzutów do ofiar stanu wojennego, do bohaterów, tym księdza Jerzego Popiłuszki.
[5] [42.40-47.62] Dzisiaj kiedy rozmawialiśmy z bohaterką tamtych czasów Henryką Krzywonus.
[6] [48.14-50.05] Ona nie kryje oburzenia tymi słowami.
[7] [50.09-59.97] Stąd konieczne jest, aby Instytut Pamięci Narodowej jako państwowy organ odpowiedzialny zadbanie o polską historię, o dobre imię

Return JSON in this exact format:
{
    "selections": [
        {
            "start_time": float,
            "end_time": float,
            "reason": "why this part is interesting"
        }
        // up to 3 selections allowed
    ]
}

Rules:
1. Pick up to 3 most interesting parts
2. Each part must be continuous (no gaps within a selection)
3. Total duration of all selections must not exceed 30.0 seconds
4. Fragments don't need to be consecutive (can be from different parts of speech)

Consider: announcements, emotional statements, key messages, controversies.
2025-02-05 16:27:04.753 | INFO     | generator.llm_processor:process:83 - Selected 2 segments, total duration: 26.86s
2025-02-05 16:27:04.753 | INFO     | generator.video_processor:create_highlights:57 - Creating highlights from 2 segments, total duration: 26.86s
2025-02-05 16:27:04.753 | DEBUG    | generator.video_processor:create_highlights:64 - Processing segment 1/2: 24.84-41.82
2025-02-05 16:27:04.753 | DEBUG    | generator.video_processor:create_highlights:76 - Extracting raw segment to C:\Users\skibi\AppData\Local\Temp\raw_67a383_00.mp4
2025-02-05 16:27:04.811 | DEBUG    | generator.video_processor:create_highlights:96 - Adding subtitles to segment 1
2025-02-05 16:27:04.811 | DEBUG    | generator.video_processor:_add_subtitles_to_segment:157 - Adding subtitles for time range 24.84-41.82
2025-02-05 16:27:25.565 | DEBUG    | generator.video_processor:create_highlights:64 - Processing segment 2/2: 50.09-59.97
2025-02-05 16:27:25.566 | DEBUG    | generator.video_processor:create_highlights:76 - Extracting raw segment to C:\Users\skibi\AppData\Local\Temp\raw_67a383_01.mp4
2025-02-05 16:27:25.628 | DEBUG    | generator.video_processor:create_highlights:96 - Adding subtitles to segment 2
2025-02-05 16:27:25.629 | DEBUG    | generator.video_processor:_add_subtitles_to_segment:157 - Adding subtitles for time range 50.09-59.97
2025-02-05 16:27:27.977 | SUCCESS  | generator.video_processor:create_highlights:139 - Created highlights video with subtitles: e:\ai-generator-2\outputs\highlights.mp4
2025-02-05 16:27:27.978 | DEBUG    | generator.video_processor:create_highlights:141 - Cleaning up temporary files
2025-02-05 16:27:27.981 | INFO     | __main__:process_video:29 - 
Highlights created:
2025-02-05 16:27:27.981 | INFO     | __main__:process_video:31 - 24.84-41.82 (16.98s): This segment highlights a controversy by comparing a wanted individual to heroes of the past, raising questions about historical revisionism and potentially stirring emotional reactions.
2025-02-05 16:27:27.983 | INFO     | __main__:process_video:31 - 50.09-59.97 (9.88s): This concluding statement emphasizes the importance of the Institute for Memory in safeguarding history and Poland's reputation, suggesting a potential call to action or criticism regarding historical accuracy.
